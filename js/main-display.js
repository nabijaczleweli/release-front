/*!
 * release-front <https://github.com/nabijaczleweli/release-front>
 * Copyright 2018 nabijaczleweli <https://nabijaczleweli.xyz>
 * Available under MIT license <https://opensource.org/licenses/mit>
 */
(function (global, factory) {
	if (typeof define === "function" && define.amd) {
		define(["./assets", "./platform-detect", "./url"], factory);
	} else if (typeof exports !== "undefined") {
		factory(require("./assets"), require("./platform-detect"), require("./url"));
	} else {
		var mod = {
			exports: {}
		};
		factory(global.assets, global.platformDetect, global.url);
		global.mainDisplay = mod.exports;
	}
})(this, function (_assets, _platformDetect, _url) {
	"use strict";

	window.addEventListener("load", function () {
		var DOWNLOAD_BUTTON = document.getElementById("main-button");
		var LOGO = document.getElementById("main-logo");
		var REPO_LINE = document.getElementById("main-repo-line");
		var LATEST_LINE = document.getElementById("main-latest-line");

		var HEADING_LINKS = document.getElementsByClassName("main-heading-link");
		var REPO_NAME_CONTAINERS = document.getElementsByClassName("main-repo-name");
		var LATEST_LINK_CONTAINERS = document.getElementsByClassName("main-latest-link");
		var VERSION_CONTAINERS = document.getElementsByClassName("main-version");
		var PLATFORM_CONTAINERS = document.getElementsByClassName("main-platform");

		var slug = (0, _url.extract_slug)(window.location.search);

		var platform = _platformDetect.Platform.from_platform();
		Array.from(PLATFORM_CONTAINERS).forEach(function (_) {
			return _.innerText = _platformDetect.Platform.name(platform);
		});

		var slug_name = (0, _url.full_name)(slug);
		if (slug_name) {
			Array.from(HEADING_LINKS).forEach(function (_) {
				return _.href = "//github.com/" + slug_name;
			});
			Array.from(REPO_NAME_CONTAINERS).forEach(function (_) {
				return _.innerText = slug_name;
			});
		}

		(0, _url.latest_release)(slug, function (status, release) {
			if (status < 200 || status >= 300) {
				REPO_LINE.classList.add("hidden");
				LATEST_LINE.classList.add("hidden");
				DOWNLOAD_BUTTON.classList.add("error");
				DOWNLOAD_BUTTON.innerText = "No releases found";
				DOWNLOAD_BUTTON.addEventListener("click", function () {
					return window.location.search = "";
				});
				return;
			}

			if (release.html_url) Array.from(LATEST_LINK_CONTAINERS).forEach(function (_) {
				return _.href = release.html_url;
			});

			if (release.tag_name) {
				Array.from(VERSION_CONTAINERS).forEach(function (_) {
					return _.innerText = release.tag_name;
				});

				var logo_callback = function logo_callback(logo_url) {
					if (logo_url) {
						LOGO.src = logo_url;
						LOGO.alt = slug_name + " logo";
						LOGO.title = LOGO.alt;
						LOGO.classList.remove("hidden");
					}
				};
				var assets_callback = function assets_callback(ranked_assets) {
					if (!Array.isArray(ranked_assets)) if (ranked_assets === null) ranked_assets = [];else ranked_assets = [ranked_assets];

					if (ranked_assets.length === 0) {
						DOWNLOAD_BUTTON.innerText = "No assets found";
						DOWNLOAD_BUTTON.href = release.html_url;
					} else DOWNLOAD_BUTTON.href = ranked_assets[0].data.browser_download_url;
				};

				(0, _url.get_config)(slug, release.tag_name, function (logo_url, asset_spec) {
					if (logo_url) logo_callback(logo_url);else (0, _url.find_logo)(slug, release.tag_name, logo_callback);

					if (asset_spec && (0, _assets.specifies_assets_for)(asset_spec, platform)) assets_callback((0, _assets.extract_asset_for)(asset_spec, platform, release.tag_name));else {
						var ranked_assets = (0, _assets.rank_assets)(slug.repo, release.tag_name, release.assets, platform);
						ranked_assets.sort(function (lhs, rhs) {
							return rhs.score - lhs.score;
						});
						assets_callback(ranked_assets);
					}
				});
			}
		});
	});
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9tYWluLWRpc3BsYXkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBNEJBLFFBQU8sZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsWUFBTTtBQUNyQyxNQUFNLGtCQUFrQixTQUFTLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBeEI7QUFDQSxNQUFNLE9BQWtCLFNBQVMsY0FBVCxDQUF3QixXQUF4QixDQUF4QjtBQUNBLE1BQU0sWUFBa0IsU0FBUyxjQUFULENBQXdCLGdCQUF4QixDQUF4QjtBQUNBLE1BQU0sY0FBa0IsU0FBUyxjQUFULENBQXdCLGtCQUF4QixDQUF4Qjs7QUFFQSxNQUFNLGdCQUF5QixTQUFTLHNCQUFULENBQWdDLG1CQUFoQyxDQUEvQjtBQUNBLE1BQU0sdUJBQXlCLFNBQVMsc0JBQVQsQ0FBZ0MsZ0JBQWhDLENBQS9CO0FBQ0EsTUFBTSx5QkFBeUIsU0FBUyxzQkFBVCxDQUFnQyxrQkFBaEMsQ0FBL0I7QUFDQSxNQUFNLHFCQUF5QixTQUFTLHNCQUFULENBQWdDLGNBQWhDLENBQS9CO0FBQ0EsTUFBTSxzQkFBeUIsU0FBUyxzQkFBVCxDQUFnQyxlQUFoQyxDQUEvQjs7QUFFQSxNQUFJLE9BQU8sdUJBQWEsT0FBTyxRQUFQLENBQWdCLE1BQTdCLENBQVg7O0FBRUEsTUFBSSxXQUFXLHlCQUFTLGFBQVQsRUFBZjtBQUNBLFFBQU0sSUFBTixDQUFXLG1CQUFYLEVBQWdDLE9BQWhDLENBQXdDO0FBQUEsVUFBSyxFQUFFLFNBQUYsR0FBYyx5QkFBUyxJQUFULENBQWMsUUFBZCxDQUFuQjtBQUFBLEdBQXhDOztBQUVBLE1BQUksWUFBWSxvQkFBVSxJQUFWLENBQWhCO0FBQ0EsTUFBRyxTQUFILEVBQWM7QUFDYixTQUFNLElBQU4sQ0FBVyxhQUFYLEVBQTBCLE9BQTFCLENBQWtDO0FBQUEsV0FBSyxFQUFFLElBQUYscUJBQXlCLFNBQTlCO0FBQUEsSUFBbEM7QUFDQSxTQUFNLElBQU4sQ0FBVyxvQkFBWCxFQUFpQyxPQUFqQyxDQUF5QztBQUFBLFdBQUssRUFBRSxTQUFGLEdBQWMsU0FBbkI7QUFBQSxJQUF6QztBQUNBOztBQUVELDJCQUFlLElBQWYsRUFBcUIsVUFBQyxNQUFELEVBQVMsT0FBVCxFQUFxQjtBQUN6QyxPQUFHLFNBQVMsR0FBVCxJQUFnQixVQUFVLEdBQTdCLEVBQWtDO0FBQ2pDLGNBQVUsU0FBVixDQUFvQixHQUFwQixDQUF3QixRQUF4QjtBQUNBLGdCQUFZLFNBQVosQ0FBc0IsR0FBdEIsQ0FBMEIsUUFBMUI7QUFDQSxvQkFBZ0IsU0FBaEIsQ0FBMEIsR0FBMUIsQ0FBOEIsT0FBOUI7QUFDQSxvQkFBZ0IsU0FBaEIsR0FBNEIsbUJBQTVCO0FBQ0Esb0JBQWdCLGdCQUFoQixDQUFpQyxPQUFqQyxFQUEwQztBQUFBLFlBQU0sT0FBTyxRQUFQLENBQWdCLE1BQWhCLEdBQXlCLEVBQS9CO0FBQUEsS0FBMUM7QUFDQTtBQUNBOztBQUVELE9BQUcsUUFBUSxRQUFYLEVBQ0MsTUFBTSxJQUFOLENBQVcsc0JBQVgsRUFBbUMsT0FBbkMsQ0FBMkM7QUFBQSxXQUFLLEVBQUUsSUFBRixHQUFTLFFBQVEsUUFBdEI7QUFBQSxJQUEzQzs7QUFFRCxPQUFHLFFBQVEsUUFBWCxFQUFxQjtBQUNwQixVQUFNLElBQU4sQ0FBVyxrQkFBWCxFQUErQixPQUEvQixDQUF1QztBQUFBLFlBQUssRUFBRSxTQUFGLEdBQWMsUUFBUSxRQUEzQjtBQUFBLEtBQXZDOztBQUVBLFFBQUksZ0JBQWdCLFNBQWhCLGFBQWdCLFdBQVk7QUFDL0IsU0FBRyxRQUFILEVBQWE7QUFDWixXQUFLLEdBQUwsR0FBYSxRQUFiO0FBQ0EsV0FBSyxHQUFMLEdBQWdCLFNBQWhCO0FBQ0EsV0FBSyxLQUFMLEdBQWEsS0FBSyxHQUFsQjtBQUNBLFdBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsUUFBdEI7QUFDQTtBQUNELEtBUEQ7QUFRQSxRQUFJLGtCQUFrQixTQUFsQixlQUFrQixnQkFBaUI7QUFDdEMsU0FBRyxDQUFDLE1BQU0sT0FBTixDQUFjLGFBQWQsQ0FBSixFQUNDLElBQUcsa0JBQWtCLElBQXJCLEVBQ0MsZ0JBQWdCLEVBQWhCLENBREQsS0FHQyxnQkFBZ0IsQ0FBQyxhQUFELENBQWhCOztBQUVGLFNBQUcsY0FBYyxNQUFkLEtBQXlCLENBQTVCLEVBQStCO0FBQzlCLHNCQUFnQixTQUFoQixHQUE0QixpQkFBNUI7QUFDQSxzQkFBZ0IsSUFBaEIsR0FBNEIsUUFBUSxRQUFwQztBQUNBLE1BSEQsTUFJQyxnQkFBZ0IsSUFBaEIsR0FBdUIsY0FBYyxDQUFkLEVBQWlCLElBQWpCLENBQXNCLG9CQUE3QztBQUNELEtBWkQ7O0FBY0EseUJBQVcsSUFBWCxFQUFpQixRQUFRLFFBQXpCLEVBQW1DLFVBQUMsUUFBRCxFQUFXLFVBQVgsRUFBMEI7QUFDNUQsU0FBRyxRQUFILEVBQ0MsY0FBYyxRQUFkLEVBREQsS0FHQyxvQkFBVSxJQUFWLEVBQWdCLFFBQVEsUUFBeEIsRUFBa0MsYUFBbEM7O0FBRUQsU0FBRyxjQUFjLGtDQUFxQixVQUFyQixFQUFpQyxRQUFqQyxDQUFqQixFQUNDLGdCQUFnQiwrQkFBa0IsVUFBbEIsRUFBOEIsUUFBOUIsRUFBd0MsUUFBUSxRQUFoRCxDQUFoQixFQURELEtBRUs7QUFDSixVQUFJLGdCQUFnQix5QkFBWSxLQUFLLElBQWpCLEVBQXVCLFFBQVEsUUFBL0IsRUFBeUMsUUFBUSxNQUFqRCxFQUF5RCxRQUF6RCxDQUFwQjtBQUNBLG9CQUFjLElBQWQsQ0FBbUIsVUFBQyxHQUFELEVBQU0sR0FBTjtBQUFBLGNBQWMsSUFBSSxLQUFKLEdBQVksSUFBSSxLQUE5QjtBQUFBLE9BQW5CO0FBQ0Esc0JBQWdCLGFBQWhCO0FBQ0E7QUFDRCxLQWJEO0FBY0E7QUFDRCxHQXJERDtBQXNEQSxFQTdFRCIsImZpbGUiOiJzdGRvdXQiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgTUlUIExpY2Vuc2UgKE1JVClcbi8vXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTggbmFiaWphY3psZXdlbGlcbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4vLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuXG5cbmltcG9ydCB7ZXh0cmFjdF9hc3NldF9mb3IsIHJhbmtfYXNzZXRzLCBzcGVjaWZpZXNfYXNzZXRzX2Zvcn0gZnJvbSBcIi4vYXNzZXRzXCI7XG5pbXBvcnQge1BsYXRmb3JtfSBmcm9tIFwiLi9wbGF0Zm9ybS1kZXRlY3RcIjtcbmltcG9ydCB7ZXh0cmFjdF9zbHVnLCBmaW5kX2xvZ28sIGZ1bGxfbmFtZSwgZ2V0X2NvbmZpZywgbGF0ZXN0X3JlbGVhc2V9IGZyb20gXCIuL3VybFwiO1xuXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XG5cdGNvbnN0IERPV05MT0FEX0JVVFRPTiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1idXR0b25cIik7XG5cdGNvbnN0IExPR08gICAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1sb2dvXCIpO1xuXHRjb25zdCBSRVBPX0xJTkUgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tcmVwby1saW5lXCIpO1xuXHRjb25zdCBMQVRFU1RfTElORSAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW4tbGF0ZXN0LWxpbmVcIik7XG5cblx0Y29uc3QgSEVBRElOR19MSU5LUyAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLWhlYWRpbmctbGlua1wiKTtcblx0Y29uc3QgUkVQT19OQU1FX0NPTlRBSU5FUlMgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLXJlcG8tbmFtZVwiKTtcblx0Y29uc3QgTEFURVNUX0xJTktfQ09OVEFJTkVSUyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLWxhdGVzdC1saW5rXCIpO1xuXHRjb25zdCBWRVJTSU9OX0NPTlRBSU5FUlMgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1haW4tdmVyc2lvblwiKTtcblx0Y29uc3QgUExBVEZPUk1fQ09OVEFJTkVSUyAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluLXBsYXRmb3JtXCIpO1xuXG5cdGxldCBzbHVnID0gZXh0cmFjdF9zbHVnKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuXG5cdGxldCBwbGF0Zm9ybSA9IFBsYXRmb3JtLmZyb21fcGxhdGZvcm0oKTtcblx0QXJyYXkuZnJvbShQTEFURk9STV9DT05UQUlORVJTKS5mb3JFYWNoKF8gPT4gXy5pbm5lclRleHQgPSBQbGF0Zm9ybS5uYW1lKHBsYXRmb3JtKSk7XG5cblx0bGV0IHNsdWdfbmFtZSA9IGZ1bGxfbmFtZShzbHVnKTtcblx0aWYoc2x1Z19uYW1lKSB7XG5cdFx0QXJyYXkuZnJvbShIRUFESU5HX0xJTktTKS5mb3JFYWNoKF8gPT4gXy5ocmVmID0gYC8vZ2l0aHViLmNvbS8ke3NsdWdfbmFtZX1gKTtcblx0XHRBcnJheS5mcm9tKFJFUE9fTkFNRV9DT05UQUlORVJTKS5mb3JFYWNoKF8gPT4gXy5pbm5lclRleHQgPSBzbHVnX25hbWUpO1xuXHR9XG5cblx0bGF0ZXN0X3JlbGVhc2Uoc2x1ZywgKHN0YXR1cywgcmVsZWFzZSkgPT4ge1xuXHRcdGlmKHN0YXR1cyA8IDIwMCB8fCBzdGF0dXMgPj0gMzAwKSB7XG5cdFx0XHRSRVBPX0xJTkUuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcblx0XHRcdExBVEVTVF9MSU5FLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG5cdFx0XHRET1dOTE9BRF9CVVRUT04uY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xuXHRcdFx0RE9XTkxPQURfQlVUVE9OLmlubmVyVGV4dCA9IFwiTm8gcmVsZWFzZXMgZm91bmRcIjtcblx0XHRcdERPV05MT0FEX0JVVFRPTi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gd2luZG93LmxvY2F0aW9uLnNlYXJjaCA9IFwiXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmKHJlbGVhc2UuaHRtbF91cmwpXG5cdFx0XHRBcnJheS5mcm9tKExBVEVTVF9MSU5LX0NPTlRBSU5FUlMpLmZvckVhY2goXyA9PiBfLmhyZWYgPSByZWxlYXNlLmh0bWxfdXJsKTtcblxuXHRcdGlmKHJlbGVhc2UudGFnX25hbWUpIHtcblx0XHRcdEFycmF5LmZyb20oVkVSU0lPTl9DT05UQUlORVJTKS5mb3JFYWNoKF8gPT4gXy5pbm5lclRleHQgPSByZWxlYXNlLnRhZ19uYW1lKTtcblxuXHRcdFx0bGV0IGxvZ29fY2FsbGJhY2sgPSBsb2dvX3VybCA9PiB7XG5cdFx0XHRcdGlmKGxvZ29fdXJsKSB7XG5cdFx0XHRcdFx0TE9HTy5zcmMgICA9IGxvZ29fdXJsO1xuXHRcdFx0XHRcdExPR08uYWx0ICAgPSBgJHtzbHVnX25hbWV9IGxvZ29gO1xuXHRcdFx0XHRcdExPR08udGl0bGUgPSBMT0dPLmFsdDtcblx0XHRcdFx0XHRMT0dPLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRsZXQgYXNzZXRzX2NhbGxiYWNrID0gcmFua2VkX2Fzc2V0cyA9PiB7XG5cdFx0XHRcdGlmKCFBcnJheS5pc0FycmF5KHJhbmtlZF9hc3NldHMpKVxuXHRcdFx0XHRcdGlmKHJhbmtlZF9hc3NldHMgPT09IG51bGwpXG5cdFx0XHRcdFx0XHRyYW5rZWRfYXNzZXRzID0gW107XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0cmFua2VkX2Fzc2V0cyA9IFtyYW5rZWRfYXNzZXRzXTtcblxuXHRcdFx0XHRpZihyYW5rZWRfYXNzZXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdERPV05MT0FEX0JVVFRPTi5pbm5lclRleHQgPSBcIk5vIGFzc2V0cyBmb3VuZFwiO1xuXHRcdFx0XHRcdERPV05MT0FEX0JVVFRPTi5ocmVmICAgICAgPSByZWxlYXNlLmh0bWxfdXJsO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRET1dOTE9BRF9CVVRUT04uaHJlZiA9IHJhbmtlZF9hc3NldHNbMF0uZGF0YS5icm93c2VyX2Rvd25sb2FkX3VybDtcblx0XHRcdH07XG5cblx0XHRcdGdldF9jb25maWcoc2x1ZywgcmVsZWFzZS50YWdfbmFtZSwgKGxvZ29fdXJsLCBhc3NldF9zcGVjKSA9PiB7XG5cdFx0XHRcdGlmKGxvZ29fdXJsKVxuXHRcdFx0XHRcdGxvZ29fY2FsbGJhY2sobG9nb191cmwpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0ZmluZF9sb2dvKHNsdWcsIHJlbGVhc2UudGFnX25hbWUsIGxvZ29fY2FsbGJhY2spO1xuXG5cdFx0XHRcdGlmKGFzc2V0X3NwZWMgJiYgc3BlY2lmaWVzX2Fzc2V0c19mb3IoYXNzZXRfc3BlYywgcGxhdGZvcm0pKVxuXHRcdFx0XHRcdGFzc2V0c19jYWxsYmFjayhleHRyYWN0X2Fzc2V0X2Zvcihhc3NldF9zcGVjLCBwbGF0Zm9ybSwgcmVsZWFzZS50YWdfbmFtZSkpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRsZXQgcmFua2VkX2Fzc2V0cyA9IHJhbmtfYXNzZXRzKHNsdWcucmVwbywgcmVsZWFzZS50YWdfbmFtZSwgcmVsZWFzZS5hc3NldHMsIHBsYXRmb3JtKTtcblx0XHRcdFx0XHRyYW5rZWRfYXNzZXRzLnNvcnQoKGxocywgcmhzKSA9PiByaHMuc2NvcmUgLSBsaHMuc2NvcmUpOyAgLy8gYmlnZ2VzdC10by1zbWFsbGVzdCA9PiBbMF0gaGFzIGJlc3QgYXNzZXRcblx0XHRcdFx0XHRhc3NldHNfY2FsbGJhY2socmFua2VkX2Fzc2V0cyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG59KTtcbiJdfQ==
