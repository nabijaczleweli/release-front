/*!
 * release-front <https://github.com/nabijaczleweli/release-front>
 * Copyright 2018 nabijaczleweli <https://nabijaczleweli.xyz>
 * Available under MIT license <https://opensource.org/licenses/mit>
 */
(function(e,t){if("function"==typeof define&&define.amd)define(["exports","./platform-detect","./util"],t);else if("undefined"!=typeof exports)t(exports,require("./platform-detect"),require("./util"));else{var n={exports:{}};t(n.exports,e.platformDetect,e.util),e.url=n.exports}})(this,function(e,t,n){"use strict";function r(e){var t=f.exec(e)||[];return t.shift(),{name:t[0]||null,repo:t[1]||null}}function o(e){return e&&e.name&&e.repo?e.name+"/"+e.repo:null}function a(e,t){if(t&&e&&e.name&&e.repo){var n="//api.github.com/repos/"+e.name+"/"+e.repo+"/releases/latest",r=new XMLHttpRequest;return r.open("GET",n),r.setRequestHeader("Accept",p),r.overrideMimeType("application/json"),r.addEventListener("readystatechange",function(){if(r.readyState===XMLHttpRequest.DONE){var e="string"==typeof r.response?JSON.parse(r.response):r.response;t(r.status,e)}}),r.send(),!0}return!1}function i(e,t,r){if(r&&t&&e&&e.name&&e.repo){var o="//rawcdn.githack.com/"+e.name+"/"+e.repo+"/"+t,a=n.cartesian(c,d,y),i=a.length,s=a.map(function(e){var t=l(e,3),n=t[0],a=t[1],u=t[2],f=o+"/"+n+a+"."+u,p=new XMLHttpRequest;p.open("GET",f);var c=!1;return p.addEventListener("readystatechange",function(){if(!c&&0!==i&&p.readyState>=XMLHttpRequest.HEADERS_RECEIVED){c=!0;var e=0|p.status;p.abort(),--i,e>=200&&300>e?(i=-1,s.forEach(function(e){return e.abort()}),r(f)):0===i&&r(null)}}),p.send(),p});return!0}return!1}function s(e,r,o){if(o&&r&&e&&e.name&&e.repo){var a="//rawcdn.githack.com/"+e.name+"/"+e.repo+"/"+r+"/release-front.json",i=new XMLHttpRequest;return i.open("GET",a),i.addEventListener("readystatechange",function(){if(i.readyState===XMLHttpRequest.DONE){if(i.status>=200&&300>i.status){var a="string"==typeof i.response?JSON.parse(i.response):i.response;if("object"===(a===void 0?"undefined":u(a))){var s=a.logo||a.logo_url;"string"==typeof s&&0!==s.length?-1===s.indexOf("//")&&(s="//rawcdn.githack.com/"+e.name+"/"+e.repo+"/"+r+"/"+s):s=null;var l=null,f=null,p=a.universal;if(p===!0)l="universal";else if("object"===(p===void 0?"undefined":u(p))&&null!==p){l=n.string_or(p.name,p.platform,p.pseudo_platform);var c=p.asset||p.asset_spec;if("string"==typeof c&&0!==c.length){f={};var d=!0,y=!1,v=void 0;try{for(var m,g=t.Platform.keys[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var h=m.value;f[h]=c}}catch(b){y=!0,v=b}finally{try{!d&&g.return&&g.return()}finally{if(y)throw v}}}}if(null===f&&(f=a.assets||a.asset_spec||null,"object"===(f===void 0?"undefined":u(f))&&null!==f))for(var E in f)if("string"==typeof f[E]&&0!==f[E].length){var _=E.toLowerCase();E!==_&&(f[_]=f[E],delete f[E])}else null!==f[E]?delete f[E]:f=null;return o(s,f,l),void 0}}o(null,null,null)}}),i.send(),!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.extract_slug=r,e.full_name=o,e.latest_release=a,e.find_logo=i,e.get_config=s;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(u){o=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=/^(?:(?:(?:(?:(?:http(?:s)?:)?\/\/)?github\.com\/)?)|\?)([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+).*/i,p="application/vnd.github.v3+json",c=["","assets/"],d=["logo","icon"],y=["png","jpg"]});