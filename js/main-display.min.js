/*!
 * release-front <https://github.com/nabijaczleweli/release-front>
 * Copyright 2018 nabijaczleweli <https://nabijaczleweli.xyz>
 * Available under MIT license <https://opensource.org/licenses/mit>
 */
(function(e,t){if("function"==typeof define&&define.amd)define(["./assets","./platform-detect","./url"],t);else if("undefined"!=typeof exports)t(require("./assets"),require("./platform-detect"),require("./url"));else{var n={exports:{}};t(e.assets,e.platformDetect,e.url),e.mainDisplay=n.exports}})(this,function(e,t,n){"use strict";window.addEventListener("load",function(){var r=document.getElementById("main-button"),a=document.getElementById("main-logo"),o=document.getElementById("main-repo-line"),s=document.getElementById("main-latest-line"),i=document.getElementsByClassName("main-heading-link"),l=document.getElementsByClassName("main-repo-name"),m=document.getElementsByClassName("main-latest-link"),f=document.getElementsByClassName("main-version"),c=document.getElementsByClassName("main-platform"),u=n.extract_slug(window.location.search),d=t.Platform.from_platform();Array.from(c).forEach(function(e){return e.innerText=t.Platform.name(d)});var g=n.full_name(u);g&&(Array.from(i).forEach(function(e){return e.href="//github.com/"+g}),Array.from(l).forEach(function(e){return e.innerText=g})),n.latest_release(u,function(t,i){if(200>t||t>=300)return o.classList.add("hidden"),s.classList.add("hidden"),r.classList.add("error"),r.innerText="No releases found",r.addEventListener("click",function(){return window.location.search=""}),void 0;if(i.html_url&&Array.from(m).forEach(function(e){return e.href=i.html_url}),i.tag_name){Array.from(f).forEach(function(e){return e.innerText=i.tag_name});var l=function l(e){e&&(a.src=e,a.alt=g+" logo",a.title=a.alt,a.classList.remove("hidden"))},c=function c(e){Array.isArray(e)||(e=null===e?[]:[e]),0===e.length?(r.innerText="No assets found",r.href=i.html_url):r.href=e[0].data.browser_download_url};n.get_config(u,i.tag_name,function(t,r){if(t?l(t):n.find_logo(u,i.tag_name,l),r&&e.specifies_assets_for(r,d))c(e.extract_asset_for(r,d,i.tag_name));else{var a=e.rank_assets(u.repo,i.tag_name,i.assets,d);a.sort(function(e,t){return t.score-e.score}),c(a)}})}})})});